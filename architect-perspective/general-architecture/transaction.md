# √ 事务处理 <Badge text="编写中" type="warning"/>

{{$page.readingTime.words}}
{{Math.ceil($page.readingTime.minutes)}} 

事务处理几乎是每一个信息系统中都会涉及到的问题，它存在的意义就是为了保证系统中数据是正确的，不同数据间不会产生矛盾（一致性，Consistency）。理论上，达成这个目标需要三方面共同努力来保障：在同一项业务处理过程中，事务保证了多个对数据的修改，要么同时成功，要么一起被撤销（原子性，Atomic）；在不同的业务处理过程中，事务保证了各自业务正在读、写的数据互相独立，不会彼此影响（隔离性，Isolation）；最后，事务应当保证所有成功被提交的数据修改都能够正确地被持久化，不丢数据（持久性，Durability）。以上即事务的“ACID”的概念提法，我个人对这个“ACID”的提法是颇为反对的，上述四种特性并不正交，AID是手段，C是目的，完全是为了拼凑个缩写才弄到一块去，误导的弊端大于传播的好处。

事务的概念也许最初是源于数据库，但今天的信息系统中已经不在局限于数据库本身，所有需要保证数据正确性（一致性）的场景中，包括但不限于数据库、缓存、消息、队列、对象文件存储等等，都可能会涉及到事务处理。当一个服务只操作一个数据源时，通过AID来获得一致性是相对容易的，但当一个服务涉及到多个不同的数据源，甚至多个不同服务同时涉及到多个不同的数据源时，这件事情就变得很困难，有时需要付出很大甚至是不切实际的代价，因此业界探索过许多方案，在确保可操作的前提下获得尽可能高的一致性保障，事务处理由此也就从一个“编程问题”上升成为一个“架构问题”。

在探索这些方案的过程中，产生了许多新的思路和概念，有一些概念看上去并不那么直观，网上针对这些方案概念的文章已经不少了，而在本章里会通过同一个具体实例在不同的事务方案中如何处理来贯穿、理顺这些概念。

## 本地事务与全局事务



## 分布式下的事务方案